function calcularRunas(){document.getElementsByClassName("finalRunes")[0].innerHTML="";let e={hp:1*document.getElementById("bhp").value,atk:1*document.getElementById("batk").value,def:1*document.getElementById("bdef").value,spd:1*document.getElementById("bspd").value,cr:1*document.getElementById("bcr").value,cd:1*document.getElementById("bcd").value,res:1*document.getElementById("bres").value,acc:1*document.getElementById("bacc").value},a={hp:1*document.getElementById("dhp").value,atk:1*document.getElementById("datk").value,def:1*document.getElementById("ddef").value,spd:1*document.getElementById("dspd").value,cr:1*document.getElementById("dcr").value,cd:1*document.getElementById("dcd").value,res:1*document.getElementById("dres").value,acc:1*document.getElementById("dacc").value},d=Array.from(document.querySelector(".sets").querySelectorAll("select")).map(e=>e.value),l=["fatal","swift","vampire","despair","violent","rage"];(l.includes(d[0])||l.includes(d[1]))&&d.pop();let n={sets:d,slots:{1:{stat:"atk",flat:!0},2:{stat:document.getElementById("r2attr").value,flat:!["hp","atk","def"].includes(document.getElementById("r2attr").value)},3:{stat:"def",flat:!0},4:{stat:document.getElementById("r4attr").value,flat:!["hp","atk","def"].includes(document.getElementById("r4attr").value)},5:{stat:"hp",flat:!0},6:{stat:document.getElementById("r6attr").value,flat:!["hp","atk","def"].includes(document.getElementById("r6attr").value)}}},c={1:{stat:document.getElementById("art1").value},2:{stat:document.getElementById("art2").value}},u=getRunesStats(n,e),i=getSetsStats(n.sets),m=getArtStats(c),g={hp:m.hp.value+e.hp*i.hp/100+u.hp,atk:m.atk.value+e.atk*i.atk/100+u.atk,def:m.def.value+e.def*i.def/100+u.def,spd:i.spd+e.spd*u.spd/100,cr:i.cr+u.cr+e.cr,cd:i.cd+u.cd+e.cd,res:i.res+u.res+e.res,acc:i.acc+u.acc+e.acc},v={hp:Math.ceil(Math.max(a.hp-g.hp,0)),atk:Math.ceil(Math.max(a.atk-g.atk,0)),def:Math.ceil(Math.max(a.def-g.def,0)),spd:Math.ceil(Math.max(a.spd-g.spd,0)),cr:Math.ceil(Math.max(a.cr-g.cr,0)),cd:Math.ceil(Math.max(a.cd-g.cd,0)),res:Math.ceil(Math.max(a.res-g.res,0)),acc:Math.ceil(Math.max(a.acc-g.acc,0))},o=checkPossibleStatusPerRune(n),f=[];for(p in o)for(t in temp=o[p],temp){let e=temp[t];null==f[e]&&(f[e]=0),f[e]++}let h={hp:{value:Math.ceil(100*v.hp/e.hp/f.hp),gem:{value:0,raridade:""},grind:{value:0,raridade:""}},atk:{value:Math.ceil(100*v.atk/e.atk/f.atk),gem:{value:0,raridade:""},grind:{value:0,raridade:""}},def:{value:Math.ceil(100*v.def/e.def/f.def),gem:{value:0,raridade:""},grind:{value:0,raridade:""}},spd:{value:Math.ceil(v.spd/f.spd),gem:{value:0,raridade:""},grind:{value:0,raridade:""}},cr:{value:Math.ceil(v.cr/f.cr),gem:{value:0,raridade:""},grind:{value:0,raridade:""}},cd:{value:Math.ceil(v.cd/f.cd),gem:{value:0,raridade:""},grind:{value:0,raridade:""}},res:{value:Math.ceil(v.res/f.res),gem:{value:0,raridade:""},grind:{value:0,raridade:""}},acc:{value:Math.ceil(v.acc/f.acc),gem:{value:0,raridade:""},grind:{value:0,raridade:""}}};for(s in h){let e=h[s];if(0==e.value)continue;let a=getGemstoneStatus(s),t=getGrindstoneStatus(s),d=["rare","hero"];for(r of d){for(let t=a[r].min;t<=a[r].max;t++)if(e.value<=t){e.gem.value=t,e.gem.raridade=r;break}if(e.gem.value>0)break}if(!(e.gem.value>0||null==t))for(r of d){for(let l=a[r].min;l<=a[r].max;l++){for(rg of d){for(let a=t[rg].min;a<=t[rg].max;a++)if(e.value<=l+a){e.gem.value=l,e.gem.raridade=r,e.grind.value=a,e.grind.raridade=rg;break}if(e.grind.value>0)break}if(e.grind.value>0)break}if(e.grind.value>0)break}}let E={1:[],2:[],3:[],4:[],5:[],6:[]};for(s in h){let e=h[s];if(e.atributo=s,0!=e.value)for(r in E)runa=E[r],o[r].includes(s)&&runa.push(e)}for(r in E){let e=E[r],a=document.createElement("div");for(s in a.classList.add("r"+r),document.getElementsByClassName("finalRunes")[0].appendChild(a),a.innerHTML="<h3>Runa "+r+"</h3>"+a.innerHTML,e){let a=e[s],t=document.createElement("p");if(t.classList.add("sub"+(1*s+1)),t.textContent=a.atributo+": "+a.value,document.getElementsByClassName("r"+r)[0].appendChild(t),a.gem.value>0){let e=document.createElement("img");e.src="swcalc/img/gem_"+a.gem.raridade+".png",e.alt=a.gem.raridade+" gem",e.classList.add("gem"),t.appendChild(e)}if(a.grind.value>0){let e=document.createElement("img");e.src="swcalc/img/grind_"+a.grind.raridade+".png",e.alt=a.grind.raridade+" grind",e.classList.add("grind"),t.appendChild(e)}}a.innerHTML+="<hr>"}}